# NoteToMP 用户手册

## 目录
- [1. 插件简介](#1-插件简介)
- [2. 安装与配置](#2-安装与配置)
- [3. 界面介绍](#3-界面介绍)
- [4. 基础功能](#4-基础功能)
- [5. 高级功能](#5-高级功能)
- [6. Markdown 语法扩展](#6-markdown-语法扩展)
- [7. 自定义样式](#7-自定义样式)
- [8. 主题管理](#8-主题管理)
- [9. 代码高亮](#9-代码高亮)
- [10. 数学公式](#10-数学公式)
- [11. 图片处理](#11-图片处理)
- [12. 文件嵌入](#12-文件嵌入)
- [13. Callout 支持](#13-callout-支持)
- [14. 前言元数据](#14-前言元数据)
- [15. 性能优化](#15-性能优化)
- [16. 故障排除](#16-故障排除)

---

## 1. 插件简介

### 1.1 什么是 NoteToMP

NoteToMP 是一个专为 Obsidian 设计的插件，主要功能是将您的笔记内容完美同步到微信公众号编辑器。它解决了微信公众号编辑器样式限制的问题，让您可以在 Obsidian 中专注于写作，然后一键发布到微信公众号。

### 1.2 主要特性

✅ **完美样式同步** - 保持笔记在 Obsidian 和微信公众号中的视觉效果一致

✅ **代码高亮** - 支持 20+ 种代码高亮主题，显示行数

✅ **数学公式** - 支持 LaTeX 和 AsciiMath 两种数学公式语法

✅ **多主题支持** - 30+ 款精美主题，持续更新

✅ **自定义样式** - 支持自定义 CSS，打造独特风格

✅ **图片处理** - 自动上传本地图片到微信公众号

✅ **多公众号** - 支持管理多个公众号（需订阅）

✅ **草稿发送** - 直接发送到公众号草稿箱（需订阅）

### 1.3 适用场景

- 技术博客作者
- 知识管理爱好者
- 需要定期发布文章的公众号运营者
- 希望保持排版一致性的内容创作者

---

## 2. 安装与配置

### 2.1 系统要求

- Obsidian 1.4.5 或更高版本
- 已关闭安全模式

### 2.2 安装步骤

#### 步骤 1：关闭安全模式
1. 打开 Obsidian
2. 进入 **设置** → **第三方插件**
3. 关闭 **安全模式**

#### 步骤 2：安装插件
1. 进入 **社区插件市场**
2. 搜索 **NoteToMP**
3. 点击 **安装**

#### 步骤 3：下载主题资源
**方法一：通过设置下载（推荐）**
1. 进入 **设置** → **第三方插件** → **Note to MP**
2. 找到 **获取更多主题**
3. 点击 **下载**

**方法二：手动下载**
1. 访问 [GitHub Releases](https://github.com/sunbooshi/note-to-mp/releases)
2. 下载 `assets.zip`
3. 解压到 `.obsidian/plugins/note-to-mp/assets/`

#### 步骤 4：验证安装
检查插件目录结构：
```
.obsidian/plugins/note-to-mp/
├── assets/
│   ├── themes.json
│   ├── highlights.json
│   ├── themes/          # 主题文件夹
│   └── highlights/      # 代码高亮文件夹
├── main.js
├── manifest.json
└── styles.css
```

---

## 3. 界面介绍

### 3.1 插件入口

**方法一：工具栏图标**
- 在 Obsidian 左侧工具栏找到 NoteToMP 图标
- 点击即可打开插件界面

**方法二：命令面板**
- 按 `Ctrl+P`（Mac: `Cmd+P`）
- 搜索「复制到公众号」
- 回车执行

### 3.2 插件界面说明

```
┌─────────────────────────────────────┐
│  NoteToMP                          │
├─────────────────────────────────────┤
│  公众号: [下拉菜单 ▼]      (订阅功能) │
│                                     │
│  样式: [下拉菜单 ▼]       [设置]    │
│  代码高亮: [下拉菜单 ▼]              │
│                                     │
│  ┌─────────────────────────────┐    │
│  │        预览区域              │    │
│  │                             │    │
│  └─────────────────────────────┘    │
│                                     │
│  [刷新] [上传图片] [发草稿] [复制]    │
│                                     │
│  封面: [下拉菜单 ▼]                 │
└─────────────────────────────────────┘
```

### 3.3 功能按钮说明

| 按钮 | 功能 | 备注 |
|------|------|------|
| 公众号 | 选择目标公众号 | 订阅功能 |
| 样式 | 选择文章主题 | 30+ 款可选 |
| 代码高亮 | 选择代码高亮主题 | 20+ 款可选 |
| 刷新 | 重新生成预览 | 内容更新时使用 |
| 上传图片 | 上传本地图片 | 订阅功能 |
| 发草稿 | 发送到公众号草稿箱 | 订阅功能 |
| 复制 | 复制到剪贴板 | 免费功能 |

---

## 4. 基础功能

### 4.1 复制到公众号

**基本步骤：**
1. 打开 NoteToMP 插件
2. 检查预览效果
3. 点击「复制」按钮
4. 在微信公众号编辑器中粘贴

**注意事项：**
- 建议先在预览中检查样式
- 如有更新，点击「刷新」按钮
- 复制后直接粘贴到公众号编辑器

### 4.2 预览功能

插件提供实时预览功能，您可以：
- 查看文章最终效果
- 检查样式是否正确
- 验证代码高亮
- 确认图片显示

### 4.3 刷新预览

当您修改笔记内容后，预览不会自动更新，需要手动点击「刷新」按钮。

**使用场景：**
- 修改了笔记内容
- 更换了主题
- 调整了自定义 CSS

---

## 5. 高级功能（订阅）

### 5.1 多公众号管理

**功能说明：**
- 支持管理多个微信公众号
- 快速在不同公众号间切换

**使用方法：**
1. 点击「公众号」下拉菜单
2. 选择目标公众号
3. 后续操作将针对该公众号

**订阅说明：**
- 该功能需要订阅才能使用
- 订阅信息请加微信 `Genius35Plus` 了解

### 5.2 图片上传

**功能说明：**
- 自动上传文章中的本地图片到微信公众号
- 替换图片地址为线上地址
- 保持原始笔记中的图片路径不变

**使用方法：**
1. 撰写包含本地图片的笔记
2. 点击「上传图片」按钮
3. 等待上传完成
4. 点击「复制」，图片会随文章一起复制

**优势：**
- 无需手动上传每张图片
- 避免公众号编辑器压缩图片
- 提高发布效率

### 5.3 发送草稿

**功能说明：**
- 直接将文章发送到公众号草稿箱
- 无需手动复制粘贴
- 自动处理图片上传

**使用方法：**
1. 完成文章编辑
2. 点击「发草稿」按钮
3. 设置文章摘要、封面等信息
4. 确认发送

**设置项：**
- **封面设置**：选择默认封面或本地上传
- **文章摘要**：自动生成或手动输入
- **原文地址**：可选设置

**安全说明：**
- 出于安全考虑，插件不提供直接发布功能
- 发送后需在微信后台确认发布

---

## 6. Markdown 语法扩展

### 6.1 基础 Markdown 支持

NoteToMP 完全支持标准 Markdown 语法：

```markdown
# 一级标题
## 二级标题
### 三级标题

**加粗**
*斜体*
~~删除线~~

- 无序列表
1. 有序列表

[链接文本](https://example.com)
![图片描述](image.jpg)
```

### 6.2 扩展语法

#### 6.2.1 图片大小设置

```markdown
普通图片：
![描述](image.jpg)

设置宽度（自动等比缩放）：
![描述](image.jpg|200)

设置宽度和高度：
![描述](image.jpg|200x150)
```

#### 6.2.2 脚注支持

```markdown
这是正文内容。[^1]

[^1]: 这是脚注内容。
```

#### 6.2.3 高亮文本

```markdown
==这是高亮文本==

或者使用 HTML：
<mark>这是高亮文本</mark>
```

#### 6.2.4 任务列表

```markdown
- [x] 已完成的任务
- [ ] 未完成的任务
```

---

## 7. 自定义样式

### 7.1 自定义 CSS 简介

NoteToMP 支持通过自定义 CSS 来调整文章样式，让您打造独特的排版风格。

### 7.2 设置方法

**步骤 1：创建样式笔记**
1. 新建一篇 Obsidian 笔记
2. 命名为「自定义样式」（或任意名称）
3. 在笔记中写入 CSS 代码

**步骤 2：配置插件**
1. 进入插件设置
2. 找到「自定义 CSS 笔记」字段
3. 输入笔记名称（例如：自定义样式）
4. 保存设置

**步骤 3：应用样式**
1. 重新打开 NoteToMP 插件
2. 预览中查看效果
3. 满意后复制使用

### 7.3 自定义 CSS 参考

#### 7.3.1 全局样式

```css
/* 设置全局字体、边距、背景色 */
.note-to-mp {
    font-family: "Microsoft YaHei", "PingFang SC", sans-serif;
    line-height: 1.8;
    padding: 20px;
    background-color: #FFFFFF;
}
```

#### 7.3.2 段落样式

```css
/* 段落间距 */
.note-to-mp p {
    margin: 1em 0;
    text-align: justify;
}
```

#### 7.3.3 标题样式

```css
/* 一级标题 */
.note-to-mp h1 {
    font-size: 1.8em;
    color: #2c3e50;
    border-bottom: 2px solid #3498db;
    padding-bottom: 10px;
}

/* 二级标题 */
.note-to-mp h2 {
    font-size: 1.5em;
    color: #34495e;
    margin-top: 1.5em;
}
```

#### 7.3.4 列表样式

```css
/* 无序列表 */
.note-to-mp ul {
    list-style-type: square;
    padding-left: 2em;
}

/* 有序列表 */
.note-to-mp ol {
    list-style-type: decimal;
    padding-left: 2em;
}
```

#### 7.3.5 强调样式

```css
/* 加粗 */
.note-to-mp strong {
    color: #e74c3c;
    font-weight: 600;
}

/* 斜体 */
.note-to-mp em {
    color: #9b59b6;
    font-style: italic;
}
```

#### 7.3.6 代码样式

```css
/* 行内代码 */
.note-to-mp code {
    background-color: #f5f5f5;
    padding: 2px 6px;
    border-radius: 3px;
    font-family: "Consolas", "Monaco", monospace;
}
```

#### 7.3.7 图片样式

```css
/* 图片对齐 */
.note-to-mp img {
    display: block;
    margin: 1em auto;
    max-width: 100%;
    border-radius: 5px;
}
```

#### 7.3.8 高亮样式

```css
/* 高亮文本背景 */
.note-highlight {
    background-color: rgba(255, 208, 0, 0.3);
    padding: 0 2px;
}
```

#### 7.3.9 Callout 样式

```css
/* Note 类型 Callout */
.note-callout-note {
    border-left: 4px solid #3498db;
    background-color: rgba(52, 152, 219, 0.1);
    padding: 10px 15px;
    margin: 1em 0;
}

/* Warning 类型 Callout */
.note-callout-warning {
    border-left: 4px solid #f39c12;
    background-color: rgba(243, 156, 18, 0.1);
    padding: 10px 15px;
    margin: 1em 0;
}
```

### 7.4 进阶技巧

#### 7.4.1 渐变背景

```css
.note-to-mp {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}
```

#### 7.4.2 自定义引用块

```css
.note-to-mp blockquote {
    border-left: 4px solid #95a5a6;
    padding-left: 15px;
    color: #7f8c8d;
    font-style: italic;
    margin: 1em 0;
}
```

#### 7.4.3 标题装饰

```css
.note-to-mp h2::before {
    content: "✦ ";
    color: #3498db;
}

.note-to-mp h2::after {
    content: " ✦";
    color: #3498db;
}
```

#### 7.4.4 分割线样式

```css
.note-to-mp hr {
    border: none;
    height: 2px;
    background: linear-gradient(to right, #3498db, #e74c3c);
    margin: 2em 0;
}
```

### 7.5 常用示例

**示例 1：简洁风格**

```css
.note-to-mp {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    line-height: 1.8;
    color: #333;
}

.note-to-mp h1, .note-to-mp h2, .note-to-mp h3 {
    font-weight: 600;
    margin-top: 1.5em;
}

.note-to-mp p {
    margin: 1em 0;
}
```

**示例 2：学术风格**

```css
.note-to-mp {
    font-family: "Times New Roman", serif;
    line-height: 2;
    color: #2c3e50;
}

.note-to-mp h1, .note-to-mp h2, .note-to-mp h3 {
    font-family: "Georgia", serif;
    font-weight: bold;
}

.note-to-mp blockquote {
    border-left: 3px solid #bdc3c7;
    padding-left: 20px;
    margin: 1.5em 0;
    font-style: italic;
    color: #7f8c8d;
}
```

**示例 3：技术博客风格**

```css
.note-to-mp {
    font-family: "Consolas", "Monaco", monospace;
    background-color: #f8f8f8;
    padding: 20px;
    border-radius: 5px;
}

.note-to-mp h1, .note-to-mp h2 {
    font-family: "Courier New", monospace;
    color: #2c3e50;
}

.note-to-mp code {
    background-color: #e8e8e8;
    padding: 2px 4px;
    border-radius: 3px;
}
```

---

## 8. 主题管理

### 8.1 主题类型

NoteToMP 目前提供 30+ 款精美主题，分为以下类别：

- **简约系列**：适合日常随笔和知识笔记
- **技术系列**：适合代码和技术文档
- **学术系列**：适合论文和研究笔记
- **商务系列**：适合商务文章和报告
- **文艺系列**：适合文学和艺术创作

### 8.2 主题预览

您可以在以下链接查看所有主题的效果：
- [主题展示页面](https://sunboshi.tech/notetomp/themes)

### 8.3 选择主题

**在插件界面选择：**
1. 打开 NoteToMP 插件
2. 在「样式」下拉菜单中选择
3. 实时预览效果

**设置默认主题：**
1. 进入插件设置
2. 在「默认样式」中选择
3. 以后每次打开都会自动应用

### 8.4 热门主题推荐

| 主题名称 | 特点 | 适用场景 |
|----------|------|----------|
| MWeb Panic | 简洁现代，代码友好 | 技术博客 |
| Maple | 温暖色调，阅读舒适 | 日常笔记 |
| Ayu | 深色主题，护眼 | 夜间写作 |
| Solarized Light | 经典配色，专业感强 | 学术文章 |
| Tomorrow | 高对比度，重点突出 | 教程文档 |

---

## 9. 代码高亮

### 9.1 代码高亮简介

NoteToMP 支持 20+ 种代码高亮主题，完全兼容 Prism.js 和 highlight.js 的样式体系。

### 9.2 支持的语言

**前端技术：**
- JavaScript, TypeScript
- HTML, CSS
- Vue, React

**后端技术：**
- Python, Java, Go
- PHP, Ruby, Node.js

**其他语言：**
- C, C++, C#
- Rust, Swift, Kotlin
- SQL, Bash, Shell
- JSON, YAML, XML
- Markdown, LaTeX

### 9.3 使用方法

**行内代码：**
```markdown
这是 `行内代码` 示例。
```

**代码块：**
```markdown
```javascript
function hello() {
    console.log("Hello, World!");
}
`` `
```

**指定语言：**
```markdown
```python
def fibonacci(n):
    if n <= 1:
        return n
    return fibonacci(n-1) + fibonacci(n-2)
`` `
```

### 9.4 代码行数显示

默认情况下，代码块会显示行数。如需隐藏：

```css
.note-to-mp pre code {
    counter-reset: none;
}
```

### 9.5 代码高亮主题

**浅色主题：**
- GitHub (默认)
- GitHub Dark
- Atom One Light
- Solarized Light
- Xcode

**深色主题：**
- Dracula
- Monokai
- Atom One Dark
- VS2015
- Tomorrow Night

**彩色主题：**
- Rainbow
- Nord
- Ayu Mirage
- One Dark

### 9.6 自定义代码样式

如需自定义代码块样式：

```css
/* 代码块容器 */
.note-to-mp pre {
    background-color: #f6f8fa;
    border-radius: 6px;
    padding: 16px;
    overflow: auto;
    margin: 1em 0;
}

/* 代码字体 */
.note-to-mp pre code {
    font-family: "Consolas", "Monaco", monospace;
    font-size: 14px;
    line-height: 1.5;
}

/* 代码行数 */
.note-to-mp pre code .line-numbers {
    color: #999;
    padding-right: 15px;
    user-select: none;
}
```

---

## 10. 数学公式

### 10.1 支持的语法

NoteToMP 支持两种数学公式语法：

1. **LaTeX** - 功能强大，符号齐全（默认）
2. **AsciiMath** - 语法简单，易学易用

### 10.2 LaTeX 语法

#### 10.2.1 行内公式

```markdown
这是行内公式 $E = mc^2$，还有 $\int_a^b f(x)dx$。
```

#### 10.2.2 行间公式

```markdown
$$
\frac{-b \pm \sqrt{b^2 - 4ac}}{2a}
$$
```

#### 10.2.3 常用符号

**上标和下标：**
```latex
x^2        % 上标
x_1        % 下标
x^2_1      % 同时有上下标
```

**分数：**
```latex
\frac{a}{b}        % 分数
\frac{分子}{分母}
```

**根号：**
```latex
\sqrt{x}            % 平方根
\sqrt[n]{x}         % n 次方根
\sqrt{a^2 + b^2}
```

**求和与积分：**
```latex
\sum_{i=1}^{n} i^2         % 求和
\int_{a}^{b} f(x)dx        % 积分
```

**希腊字母：**
```latex
\alpha, \beta, \gamma      % 小写
\Delta, \Sigma, \Omega     % 大写
```

**特殊符号：**
```latex
\pm         % 正负号
\infty      % 无穷大
\leq        % 小于等于
\geq        % 大于等于
\neq        % 不等于
\approx     % 近似于
```

#### 10.2.4 矩阵

```latex
$$
\begin{bmatrix}
a & b \\
c & d
\end{bmatrix}
$$
```

#### 10.2.5 方程组

```latex
$$
\begin{cases}
x + y = 1 \\
2x - y = 2
\end{cases}
$$
```

### 10.3 AsciiMath 语法

#### 10.3.1 特点
- 语法更简洁
- 更容易记忆
- 适合简单公式

#### 10.3.2 基本语法

**行内公式：**
```markdown
这是行内公式 `E = mc^2`。
```

**行间公式：**
```markdown
``sqrt(a^2+b^2)``
```

#### 10.3.3 常用符号

```asciimath
x^2                      % 上标
x_1                      % 下标
(a+b)/(c+d)              % 分数
sqrt(x)                  % 根号
sum_(i=1)^n i^2          % 求和
int_a^b f(x) dx          % 积分
alpha, beta, gamma        % 希腊字母
```

**注意：**
- AsciiMath 不支持多行公式
- 每行公式需要单独一个代码块

### 10.4 设置默认语法

**在插件设置中：**
1. 进入插件设置
2. 找到「数学公式语法」选项
3. 选择「LaTeX」或「AsciiMath」
4. 保存设置

### 10.5 混合使用

如需在同一文章中混用两种语法：

```markdown
LaTeX 公式：
``` latex
c=\pm\sqrt{a^2+b^2}
```

AsciiMath 公式：
``` am
c=+-sqrt(a^2+b^2)
```

### 10.6 实时预览

**LaTeX：**
- 使用 Obsidian 的原生 LaTeX 渲染
- 安装 MathJax 或 KaTeX 插件可获得更好效果

**AsciiMath：**
- 需要安装 AsciiMath 插件才能预览
- 插件地址：https://github.com/jg.

### 10.7 调试技巧

**问题：公式不显示**
- 检查语法是否正确
- 确认插件设置中的默认语法
- 尝试在代码块中明确指定语法

**问题：符号渲染错误**
- LaTeX：参考 [LaTeX 符号大全](https://katex.org/docs/supported.html)
- AsciiMath：参考 [AsciiMath 语法](http://asciimath.org/)

### 10.8 推荐资源

- [LaTeX 使用指南 - 少数派](https://sspai.com/post/77684)
- [通用 LaTeX 数学公式语法手册](http://www.uinio.com/Math/LaTex/)
- [AsciiMath 介绍](https://asciimath.widcard.win/zh/introduction/)
- [KaTeX 支持的符号](https://katex.org/docs/supported.html)

---

## 11. 图片处理

### 11.1 本地图片支持

NoteToMP 完全支持 Obsidian 中的图片语法：

```markdown
普通图片：
![描述](image.jpg)

带标题的图片：
![描述](image.jpg "图片标题")

Obsidian 嵌入：
![](image.jpg)
```

### 11.2 图片大小设置

**设置固定宽度：**
```markdown
![描述](image.jpg|200)
```

**设置固定尺寸：**
```markdown
![描述](image.jpg|200x150)
```

**百分比宽度：**
```markdown
![描述](image.jpg|50%)
```

### 11.3 图片上传（订阅功能）

#### 11.3.1 功能说明
- 自动扫描文章中的本地图片
- 批量上传到微信公众号素材库
- 替换为线上链接
- 保持笔记中图片路径不变

#### 11.3.2 使用方法
1. 撰写包含本地图片的文章
2. 点击「上传图片」按钮
3. 等待上传完成（显示进度）
4. 点击「复制」或「发草稿」

#### 11.3.3 优势
- **提高效率**：无需手动逐张上传
- **保证清晰度**：避免公众号编辑器压缩
- **安全性高**：笔记中的路径不会被修改
- **快速预览**：上传后立即显示线上地址

### 11.4 图片样式自定义

**居中显示：**
```css
.note-to-mp img {
    display: block;
    margin: 1em auto;
}
```

**添加边框和阴影：**
```css
.note-to-mp img {
    border: 1px solid #ddd;
    border-radius: 5px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
```

**响应式图片：**
```css
.note-to-mp img {
    max-width: 100%;
    height: auto;
}
```

**图片说明文字：**
```css
.note-to-mp img + em {
    display: block;
    text-align: center;
    color: #666;
    font-size: 0.9em;
    margin-top: 5px;
}
```

### 11.5 图片最佳实践

1. **格式选择**
   - 优先使用 JPG（照片）或 PNG（图标）
   - 避免使用 BMP、TIF 等大文件格式
   - 建议压缩后使用

2. **尺寸建议**
   - 宽度不超过 2000px
   - 文件大小不超过 5MB
   - 使用统一的宽度标准

3. **命名规范**
   - 使用英文命名
   - 避免空格和特殊字符
   - 添加有意义的描述

4. **版权问题**
   - 使用自有图片或开源图片
   - 注明图片来源
   - 尊重版权

### 11.6 图片热力图

如果您经常使用截图，可以使用以下自定义样式：

```css
.note-to-mp img {
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 5px;
    background: white;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}
```

---

## 12. 文件嵌入

### 12.1 文件嵌入简介

文件嵌入是 Obsidian 的强大功能，NoteToMP 完全支持此特性。您可以引用其他文件的内容，作为模板使用。

### 12.2 基本语法

**引用整个文件：**
```markdown
![[文件名称]]
```

**引用文件中的特定章节：**
```markdown
![[文件名称#章节标题]]
```

**引用特定段落：**
```markdown
![[文件名称#^段落标记]]
```

### 12.3 使用场景

1. **模板复用**
   - 创建统一的模板文件
   - 在多篇文章中引用

2. **内容复用**
   - 引用之前的文章片段
   - 保持内容一致性

3. **文档管理**
   - 拆分大文档为小模块
   - 方便维护和更新

### 12.4 NoteToMP 中的处理

**引用样式：**
- 默认以引用块形式显示
- 显示来源文件信息

**正文样式：**
- 相当于直接写入内容
- 更自然流畅

### 12.5 实际示例

**示例 1：引用章节**

创建「模板-代码规范.md」：
```markdown
# 代码规范

## 命名规范
- 变量使用驼峰命名
- 常量使用全大写

## 注释规范
- 每个函数都需要注释
- 复杂逻辑需要详细说明
```

在文章中引用：
```markdown
以下是代码规范：
![[模板-代码规范#命名规范]]
```

**示例 2：引用段落**

创建「模板-版权声明.md」：
```markdown
本文首发于我的个人公众号「孙博士研究所」。
如需转载，请联系后台获取授权。

[^版权]: 本文由孙博士原创，保留所有权利。
```

在文章中引用：
```markdown
[[模板-版权声明#^版权]]
```

### 12.6 动态更新

嵌入内容的最大优势是**动态更新**：
- 修改源文件，引用处自动更新
- 无需手动逐个修改
- 保证一致性

### 12.7 注意事项

1. **相对路径**
   - 使用相对路径引用文件
   - 避免使用绝对路径

2. **循环引用**
   - 避免文件相互引用
   - 可能导致渲染错误

3. **性能影响**
   - 过多嵌入可能影响性能
   - 建议合理使用

---

## 13. Callout 支持

### 13.1 Callout 简介

Callout 是 Obsidian 0.14+ 版本引入的功能，用于创建信息提示框。NoteToMP 完全支持此功能。

### 13.2 基本语法

```markdown
> [!note] 笔记
> 这是一个笔记类型的 Callout。

> [!tip] 提示
> 这是一个提示类型的 Callout。

> [!warning] 警告
> 这是一个警告类型的 Callout。
```

### 13.3 支持的 Callout 类型

| 类型 | 别名 | 用途 |
|------|------|------|
| note | note | 标注重点信息 |
| abstract | abstract, summary, tldr | 摘要信息 |
| tip | tip, hint, important | 提示和小技巧 |
| success | success, check, done | 成功提示 |
| question | question, help, faq | 问题求助 |
| warning | warning, caution, attention | 警告信息 |
| failure | failure, fail, missing, danger, error, bug | 错误和失败 |
| example | example | 示例说明 |
| quote | quote, cite | 引用内容 |

### 13.4 样式定制

**自定义 Note 类型样式：**
```css
.note-callout-note {
    border-left: 4px solid #3498db;
    background-color: rgba(52, 152, 219, 0.1);
    padding: 10px 15px;
    margin: 1em 0;
    border-radius: 4px;
}
```

**自定义 Warning 类型样式：**
```css
.note-callout-warning {
    border-left: 4px solid #f39c12;
    background-color: rgba(243, 156, 18, 0.1);
    padding: 10px 15px;
    margin: 1em 0;
    border-radius: 4px;
}
```

**自定义 Success 类型样式：**
```css
.note-callout-success {
    border-left: 4px solid #2ecc71;
    background-color: rgba(46, 204, 113, 0.1);
    padding: 10px 15px;
    margin: 1em 0;
    border-radius: 4px;
}
```

### 13.5 高级用法

**添加图标：**
```css
.note-callout-note::before {
    content: "📌 ";
    margin-right: 8px;
}

.note-callout-tip::before {
    content: "💡 ";
    margin-right: 8px;
}

.note-callout-warning::before {
    content: "⚠️ ";
    margin-right: 8px;
}
```

**圆角样式：**
```css
.note-to-mp .callout {
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
```

**渐变背景：**
```css
.note-callout-note {
    background: linear-gradient(135deg, rgba(52, 152, 219, 0.1), rgba(41, 128, 185, 0.1));
}
```

### 13.6 实际示例

**示例 1：代码规范提示**
```markdown
> [!tip] 命名规范
> - 变量名使用驼峰命名法
> - 常量使用全大写字母
> - 函数名以动词开头

> [!warning] 注意事项
> - 不要使用拼音命名
> - 避免使用单个字母（循环变量除外）
```

**示例 2：学习笔记**
```markdown
> [!note] 重要概念
> 观察者模式是一种设计模式，用于定义对象间的一对多依赖关系。

> [!example] 使用场景
> - 事件处理系统
> - 消息推送
> - 数据绑定

> [!question] 思考
> 什么情况下应该使用观察者模式？
```

### 13.7 嵌套 Callout

```markdown
> [!tip] 外层提示
> 这是一级提示
>
> > [!note] 内层注释
> > 这是嵌套的注释
```

---

## 14. 前言元数据

### 14.1 简介

NoteToMP 支持通过前言元数据（YAML Front Matter）来设置文章的各种属性，如标题、作者、封面等。

### 14.2 基本语法

```yaml
---
标题: 我的文章标题
作者: 张三
日期: 2024-01-01
封面: "![封面图](cover.jpg)"
摘要: 这是文章的摘要
样式: MWeb Panic
代码高亮: github
---
```

### 14.3 完整示例

```yaml
---
标题: NoteToMP 使用指南
作者: 孙博士
日期: 2024-01-15
封面: "![[cover.jpg]]"
摘要: 详细介绍 NoteToMP 插件的各项功能和使用方法
原文地址: https://example.com/article
打开评论: true
仅粉丝可评论: true
公众号: 孙博士研究所
样式: Solarized Light
代码高亮: atom-one-light
---
```

### 14.4 支持的字段

| 字段名 | 描述 | 示例 |
|--------|------|------|
| 标题 | 文章标题 | `标题: 我的文章` |
| 作者 | 作者姓名 | `作者: 张三` |
| 日期 | 发布日期 | `日期: 2024-01-01` |
| 封面 | 封面图片 | `封面: "![图](img.jpg)"` |
| 摘要 | 文章摘要 | `摘要: 这是摘要` |
| 原文地址 | 原文链接 | `原文地址: https://...` |
| 打开评论 | 是否开启评论 | `打开评论: true` |
| 仅粉丝可评论 | 评论权限 | `仅粉丝可评论: true` |
| 公众号 | 公众号名称 | `公众号: 我的公众号` |
| 样式 | 主题名称 | `样式: MWeb Panic` |
| 代码高亮 | 高亮主题 | `代码高亮: github` |

### 14.5 使用要点

1. **位置**：前言元数据必须放在文章开头
2. **格式**：使用 `---` 包围，内容为 YAML 格式
3. **引号**：包含特殊字符的值需要加引号
4. **覆盖**：前言元数据的设置会覆盖插件界面的设置

### 14.6 与插件设置的关系

- **优先级**：前言元数据 > 插件界面设置 > 默认设置
- **继承性**：未设置的字段使用插件界面的设置
- **默认值**：连个地方都没设置则使用默认值

---

## 15. 性能优化

### 15.1 优化建议

#### 15.1.1 图片优化
- **压缩图片**：使用 TinyPNG 等工具压缩
- **控制尺寸**：宽度不超过 2000px
- **选择格式**：照片用 JPG，图标用 PNG
- **延迟上传**：大型文章可先复制，后上传图片

#### 15.1.2 文档结构
- **避免过长的文章**：超过 5000 字建议拆分为多篇
- **合理使用嵌入**：过多嵌入可能影响渲染速度
- **图片数量**：单篇文章不超过 20 张图片

#### 15.1.3 样式优化
- **简化 CSS**：避免过于复杂的自定义样式
- **主题选择**：选择加载速度较快的主题
- **代码高亮**：非必要时不显示行数

### 15.2 常见性能问题

#### 15.2.1 预览加载慢

**原因：**
- 文章过长
- 图片过多
- 嵌入内容复杂

**解决方案：**
- 拆分为多篇文章
- 压缩图片
- 简化嵌入结构

#### 15.2.2 复制失败

**原因：**
- 内容过大
- 内存不足

**解决方案：**
- 分批复制
- 关闭其他应用程序
- 重启 Obsidian

#### 15.2.3 上传图片超时

**原因：**
- 网络不稳定
- 图片过大
- 服务器响应慢

**解决方案：**
- 检查网络连接
- 压缩图片大小
- 重试上传

### 15.3 故障恢复

如果插件出现异常：

1. **重启插件**
   - 在插件列表中禁用再启用

2. **重启 Obsidian**
   - 完全退出再打开

3. **清理缓存**
   - 删除 `.obsidian/cache/note-to-mp/`

4. **重置设置**
   - 删除插件配置，重新设置

---

## 16. 故障排除

### 16.1 安装问题

#### 16.1.1 插件无法安装

**症状**：在社区插件市场搜索不到 NoteToMP

**解决方案**：
1. 检查 Obsidian 版本是否为 1.4.5+
2. 确认已关闭安全模式
3. 重启 Obsidian
4. 尝试手动下载安装包

#### 16.1.2 主题下载失败

**症状**：点击下载后提示失败

**解决方案**：
1. 检查网络连接
2. 尝试使用科学上网
3. 手动下载 assets.zip
4. 检查插件目录权限

#### 16.1.3 只有默认主题

**症状**：下载后只有 maple.css 一个主题

**解决方案**：
1. 检查 assets 目录结构
2. 确认 themes.json 存在
3. 重新下载主题资源
4. 检查插件版本兼容性

### 16.2 使用问题

#### 16.2.1 预览不显示

**症状**：插件界面打开但预览区域空白

**解决方案**：
1. 检查笔记内容是否为空
2. 点击「刷新」按钮
3. 重启插件
4. 检查控制台错误信息

#### 16.2.2 样式异常

**症状**：预览效果与预期不符

**解决方案**：
1. 确认主题已正确下载
2. 检查自定义 CSS 是否有语法错误
3. 切换到默认主题测试
4. 清除浏览器缓存

#### 16.2.3 代码高亮失效

**症状**：代码块没有高亮显示

**解决方案**：
1. 检查代码高亮主题是否下载
2. 确认代码块指定了语言
3. 尝试更换高亮主题
4. 检查 CSS 是否有冲突

#### 16.2.4 数学公式不显示

**症状**：LaTeX 或 AsciiMath 语法无法渲染

**解决方案**：
1. 检查插件设置中的默认语法
2. 确认代码块语法指定正确
3. 安装对应的预览插件（MathJax/KaTeX 或 AsciiMath）
4. 参考数学公式章节的语法

### 16.3 功能问题

#### 16.3.1 图片上传失败

**症状**：点击上传图片后提示失败

**解决方案**：
1. 检查图片路径是否正确
2. 确认图片格式受支持（JPG/PNG/GIF）
3. 检查图片大小（不超过 10MB）
4. 验证网络连接和账号权限

#### 16.3.2 复制失败

**症状**：点击复制后剪贴板为空

**解决方案**：
1. 检查内容是否过大（超过 1MB）
2. 尝试分批复制
3. 重启 Obsidian
4. 检查系统剪贴板权限

#### 16.3.3 发草稿失败

**症状**：点击发草稿后提示错误

**解决方案**：
1. 确认已购买订阅服务
2. 检查公众号账号是否有效
3. 验证网络连接
4. 查看错误日志详情

### 16.4 样式问题

#### 16.4.1 自定义 CSS 不生效

**症状**：设置了自定义 CSS 但没有效果

**解决方案**：
1. 确认自定义 CSS 笔记路径正确
2. 检查 CSS 语法是否有错误
3. 清除 CSS 缓存
4. 重新加载插件

#### 16.4.2 主题冲突

**症状**：多个主题样式混合显示

**解决方案**：
1. 只使用一个主题
2. 检查自定义 CSS 是否覆盖了主题
3. 使用开发者工具检查样式
4. 重置为默认设置

### 16.5 调试方法

#### 16.5.1 查看控制台日志

1. 按 `F12` 打开开发者工具
2. 切换到「Console」选项卡
3. 复现问题
4. 查看错误信息

#### 16.5.2 检查网络请求

1. 打开开发者工具
2. 切换到「Network」选项卡
3. 执行操作（如下载主题）
4. 查看请求状态

#### 16.5.3 验证文件完整性

```bash
# 检查插件目录
ls -la .obsidian/plugins/note-to-mp/

# 检查主题文件
ls -la .obsidian/plugins/note-to-mp/assets/themes/

# 检查高亮文件
ls -la .obsidian/plugins/note-to-mp/assets/highlights/
```

### 16.6 获取帮助

如果以上方法都无法解决问题，可以通过以下渠道获取帮助：

1. **微信交流群**
   - 加微信：`Genius35Plus`
   - 备注：`NoteToMP`

2. **GitHub Issues**
   - 访问：https://github.com/sunbooshi/note-to-mp/issues
   - 提交详细的问题描述

3. **发送邮件**
   - 邮箱：支持在 GitHub 主页查找

4. **提问时请提供**
   - Obsidian 版本号
   - NoteToMP 版本号
   - 详细的问题描述
   - 截图或录屏
   - 控制台错误信息

---

## 附录

### A. 相关资源

- [Obsidian 官网](https://obsidian.md/)
- [NoteToMP 官网](https://sunboshi.tech)
- [LaTeX 符号大全](https://katex.org/docs/supported.html)
- [Markdown 语法指南](https://www.markdownguide.org/)

### B. 更新日志

详见 [CHANGELOG.md](./CHANGELOG.md)

### C. 许可证

本项目使用 MIT 许可证，详见 [LICENSE](../LICENSE)

### D. 致谢

感谢所有为本项目贡献代码和反馈问题的朋友们！

---

**版权声明**：本手册由 NoteToMP 团队编写，保留所有权利。
