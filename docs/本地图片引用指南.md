# NoteToMP 本地图片引用指南

## 方法 1：相对路径引用（推荐）

### 1.1 图片放在笔记同目录

```
你的笔记文件夹/
├── 我的笔记.md              ← 当前笔记
├── 图片1.jpg               ← 同目录图片
├── 图片2.png
└── 子文件夹/
    └── 图片3.jpg
```

**引用方式：**
```markdown
:::longimage[系统架构图]
![架构图](图片1.jpg)
:::
```

### 1.2 图片放在子目录

```
笔记文件夹/
├── 架构设计.md
└── assets/
    ├── 系统架构图.jpg
    └── 流程图.png
```

**引用方式：**
```markdown
:::longimage[系统架构设计]
![架构图](assets/系统架构图.jpg)
:::
```

## 方法 2：Obsidian 附件文件夹

### 2.1 默认附件目录

Obsidian 默认会在Vault根目录创建 `assets` 文件夹作为附件目录。

```
你的Vault/
├── .obsidian/              ← Obsidian配置
├── assets/                 ← 附件目录
│   ├── 图片1.jpg
│   └── 图片2.png
└── 笔记文件夹/
        └── 我的笔记.md
```

**引用方式：**
```markdown
:::longimage[产品截图]
![截图](assets/图片1.jpg)
:::
```

### 2.2 自定义附件目录

可以在 Obsidian 设置中自定义附件目录路径。

**设置方法：**
1. Obsidian 设置 → 文件与链接
2. 找到「附件默认存放路径」
3. 设置为 `assets/` 或其他路径

## 方法 3：直接拖拽图片

### 3.1 拖拽到编辑器

1. 将本地图片文件直接拖拽到 Obsidian 编辑器
2. Obsidian 会自动：
   - 复制图片到附件目录
   - 生成引用语法

**生成的结果：**
```markdown
![图片描述](assets/拖拽的图片名-20241112123456.jpg)
```

### 3.2 在长图展示中使用

拖拽后会自动生成图片引用，直接包裹在 `:::longimage` 中：

```markdown
:::longimage[标题]
![图片描述](assets/图片名-20241112123456.jpg)
:::
```

## 方法 4：绝对路径（不推荐）

**Windows：**
```markdown
:::longimage[架构图]
![图](C:\Users\你的用户名\Documents\项目\图片\架构图.jpg)
:::
```

**macOS/Linux：**
```markdown
:::longimage[架构图]
![图](/Users/你的用户名/项目/图片/架构图.jpg)
:::
```

**⚠️ 注意：绝对路径在不同设备上可能失效，不推荐使用**

## 方法 5：使用链接语法

### 5.1 嵌入语法（Obsidian 特有）

```markdown
:::longimage[系统架构]
![](assets/架构图.jpg)
:::
```

### 5.2 Wiki 链接

```markdown
:::longimage[数据流程]
![数据流程图|assets/数据流程图.jpg]
:::
```

## 最佳实践

### 1. 文件命名规范

**✅ 推荐命名：**
```
系统架构图_v2.1.jpg
用户旅程地图_2024.png
产品功能流程图.png
```

**❌ 避免使用：**
- 中文名称（可能导致编码问题）
- 特殊字符（空格、!@#$%等）
- 过长名称

### 2. 文件组织结构

```
项目文档/
├── 01-需求分析/
│   └── 业务流程图.png
├── 02-系统设计/
│   ├── 架构设计.md
│   └── assets/
│       ├── 系统架构图.jpg
│       └── 数据库设计.png
└── 03-开发文档/
    └── 接口文档.md
```

### 3. 图片格式选择

**推荐格式：**
- **JPG/JPEG**：照片、复杂图像
- **PNG**：图标、透明背景图
- **WebP**：现代格式，压缩率高

**不推荐：**
- BMP（文件过大）
- TIFF（兼容性差）
- GIF（色彩有限）

### 4. 图片大小优化

**建议大小：**
- 宽度：800-1200px
- 高度：根据内容调整（长图可到2000px+）
- 文件大小：< 1MB

**压缩工具：**
- TinyPNG（在线）
- ImageOptim（Mac）
- Paint.NET（Windows）

## 常见问题

### Q1：图片显示为红叉怎么办？

**检查项目：**
1. 图片路径是否正确
2. 文件名是否包含中文或特殊字符
3. 图片文件是否损坏

**解决方案：**
```markdown
# 将
![图片](中文名称图片.jpg)

# 改为
![图片](english-name.jpg)
```

### Q2：图片在 Obsidian 中能看到，但在 NoteToMP 中看不到？

**可能原因：**
1. NoteToMP 缓存未更新
2. 图片路径解析问题

**解决方案：**
1. 重启 Obsidian
2. 重新刷新 NoteToMP 预览

### Q3：如何批量引用多张图片？

**方法一：使用 Gallery**
```markdown
:::gallery[截图合集]
![截图1](assets/screenshot1.jpg)
![截图2](assets/screenshot2.jpg)
![截图3](assets/screenshot3.jpg)
:::
```

**方法二：使用多个 LongImage**
```markdown
:::longimage[页面1]
![页面1](assets/page1.png)
:::

:::longimage[页面2]
![页面2](assets/page2.png)
:::
```

### Q4：可以引用网络图片吗？

**当然可以！**

```markdown
:::longimage[示例图]
![示例](https://example.com/image.jpg)
:::
```

**注意：网络图片可能因网络问题加载慢，建议重要图片使用本地存储。**

## 实战示例

### 示例 1：产品架构文档

```
项目/
├── 文档/
│   ├── 产品架构.md
│   └── assets/
│       ├── 架构图_v2.1.jpg
│       └── 模块图.png
```

**在产品架构.md 中：**
```markdown
# 产品架构设计

## 系统整体架构

以下是我们最新的系统架构设计：

:::longimage[系统架构图 v2.1]
![系统架构设计](assets/架构图_v2.1.jpg)
:::

## 核心模块

### 用户管理模块

:::longimage[用户管理流程]
![用户管理流程图](assets/模块图.png)
:::
```

### 示例 2：需求分析文档

```
需求分析/
├── 业务流程.md
└── images/
    ├── 用户旅程图.png
    └── 数据流程图.jpg
```

**在业务流程.md 中：**
```markdown
# 用户业务流程分析

## 完整用户旅程

下面是详细的用户旅程地图：

:::longimage[用户旅程地图]
![完整的用户旅程](images/用户旅程图.png)
:::
```

## 总结

**推荐使用顺序：**
1. ✅ **相对路径**（如：`assets/图片.jpg`）
2. ✅ **拖拽自动引用**（最方便）
3. ⚠️ **绝对路径**（不推荐）
4. ✅ **网络URL**（备选方案）

**最佳实践：**
- 使用英文文件名
- 保持图片文件小（<1MB）
- 组织好文件夹结构
- 定期备份图片文件

这样您就可以轻松在 NoteToMP 中使用本地图片了！🎉
